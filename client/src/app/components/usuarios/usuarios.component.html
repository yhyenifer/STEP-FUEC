<div class="continer">

  <div class="row">
    <div class="col s12">
      <ul class="collapsible popout">
        <li class="active">
          <div class="collapsible-header">
            <i class="material-icons">person
            </i>Agregar Usuario
            <p class="description">Para optimizar espacio en pantalla, presione aqui!!</p>
          </div>

          <div class="collapsible-body card">
            <div class="card-content">
              <section id="agregarUsuario">


                <form #usuarioForm="ngForm" (ngSubmit)="addUsuario(usuarioForm)">
                  <div class="row">
                    <input type="hidden" name="_id" #_id="ngModel" [(ngModel)]="usuarioService.selectedUsuario._id">


                    <div class="input-field col s12 m6 l4 margin-button-input">
                      <input type="text" name="name" #name="ngModel" [(ngModel)]="usuarioService.selectedUsuario.name" placeholder="" required>
                      <label class="active">Nombre Completo del Usuario:</label>
                      <div *ngIf="name.touched && !name.valid">
                        <div class="required" *ngIf="name.errors.required">El Nombre del Usuario es Requerido</div>
                      </div>
                    </div>

                    <div class="input-field col s12 m6 l4 margin-button-input">
                      <input type="text" name="username" #username="ngModel" [(ngModel)]="usuarioService.selectedUsuario.username" placeholder=""
                        required>
                      <label class="active">Alias:</label>
                      <div *ngIf="username.touched && !username.valid">
                        <div class="required" *ngIf="username.errors.required">El Alias del Usuario es Requerido</div>
                      </div>
                    </div>
                    <div class="input-field col s12 m6 l4 margin-button-input">
                      <mat-form-field>
                        <label class="tamaño-letra active">Rol:</label>
                        <mat-select class="border-select" name="role" #role="ngModel" [(ngModel)]="usuarioService.selectedUsuario.role" required
                          [(value)]="usuarioService.selectedUsuario.role">
                          <mat-option value="" disabled selected>Seleccione el Rol:</mat-option>
                          <mat-option value="Administrador">Administrador</mat-option>
                          <mat-option value="Talento Humano">Talento Humano</mat-option>
                          <mat-option value="Operativo">Operativo</mat-option>
                        </mat-select>
                      </mat-form-field>
                      <div *ngIf="role.touched && !role.valid">
                        <div class="required" *ngIf="role.errors.required">El rol del usuario es requerido</div>
                      </div>
                    </div>
                    <div class="input-field col s12 m6 l4 margin-button-input">
                      <input type="password" name="password" #password="ngModel" [(ngModel)]="usuarioService.selectedUsuario.password" placeholder=""
                        required minlength="6">
                      <label class="active">Contraseña:</label>
                      <div *ngIf="password.touched && !password.valid">
                        <div class="required" *ngIf="password.errors.required">La Contraseña del Usuario es Requerida</div>
                        <div class="required" *ngIf="password.errors.minlength">La contraseña debe contener mínimo {{password.errors.minlength.requiredLength}} caracteres</div>
                      </div>
                    </div>

                    <div class="input-field col s12 m6 l4 margin-button-input">
                      <input type="password" name="confpassword" #confpassword="ngModel" [(ngModel)]="confirPass" placeholder="" required minlength="6">
                      <label class="active">Confirmar Contraseña:</label>
                      <div *ngIf="confpassword.touched && !confpassword.valid">
                        <div class="required" *ngIf="confpassword.errors.required">Confirmar la Contraseña del Usuario es Requerido</div>
                        <div class="required" *ngIf="confpassword.errors.minlength">La contraseña debe contener mínimo {{confpassword.errors.minlength.requiredLength}} caracteres</div>
                      </div>
                    </div>



                  </div>
                  <div class="row">
                    <div class="card-action">
                      <div class="input-field col col s12 ">
                        <button class="btn btn-default right darkgray " (click)="resetForm(conductorForm)"> Cancelar </button>
                        <button class="btn right waves-effect black margin-separe"> Guardar </button>
                      </div>
                    </div>
                  </div>

                </form>
              </section>
            </div>
          </div>
        </li>
      </ul>
    </div>
  </div>

  <div class="row">
    <div class="col s12">
      <div class="card">
        <div class="card-header">
          <i class="material-icons">people</i>Listado de Usuarios
        </div>
        <div class="card-conten">
          <mat-form-field class="style-search">
            <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Buscador">
          </mat-form-field>
          <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">

            <!--- Note that these columns can be defined in any order.
                        The actual rendered columns are set as a property on the row definition" -->

            <!-- name Column -->
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef class="style-head-table"> Nombre </th>
              <td mat-cell *matCellDef="let element"> {{element.name}} </td>
            </ng-container>

            <!-- username Column -->
            <ng-container matColumnDef="username">
              <th mat-header-cell *matHeaderCellDef class="style-head-table"> Alias </th>
              <td mat-cell *matCellDef="let element"> {{element.username}} </td>
            </ng-container>

            <!-- rol Column -->
            <ng-container matColumnDef="role">
              <th mat-header-cell *matHeaderCellDef class="style-head-table"> Rol </th>
              <td mat-cell *matCellDef="let element"> {{element.role}} </td>
            </ng-container>


            <ng-container matColumnDef="opciones">
              <th mat-header-cell *matHeaderCellDef class="style-head-table"> Opciones </th>
              <td mat-cell *matCellDef="let element">
                <a href="/usuarios#agregarUsuario">
                  <button class="btn black margin-separe" (click)="editUsuario(element)" type="button">
                    <i class="material-icons">edit</i>
                  </button>
                </a>
                <button class="btn darkgray modal-trigger " type="button" href="#modal1" (click)="deleteUsuario(element._id)">
                  <i class="material-icons">delete</i>
                </button>
              </td>
            </ng-container>



            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          </table>
          <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>



        </div>
      </div>
    </div>

  </div>
</div>

<!-- Modal Structure -->
<div id="modal1" class="modal">
  <div class="modal-content">
    <h5>¿Esta completamente seguro de Eliminar este Usuario?</h5>
  </div>
  <div class="modal-footer">

    <button class="btn btn-default right darkgray modal-close "> No </button>
    <button class="btn right waves-effect black margin-separe-lado modal-close" (click)="eliminar()"> Si </button>
  </div>
</div>